<tal:available define="
                 locking_view nocall:here/@@locking_view;
                 webhelpers nocall:locking_view/webhelpers;
                 session here/session;
               "
               condition="webhelpers/use_locking_feature"
>
  <a class="icon icon-lock${python:'-open' if not session.is_locked else None} pat-tooltip"
     href="${here/absolute_url}/@@locking_menu#locking-menu"
     data-pat-tooltip="source: ajax; position-list: tr"
     i18n:domain="euphorie"
  >
    <tal:switch switch="locking_view/state">
      <tal:case case="string:locked"
                i18n:translate="label_locked"
      >
        Locked
      </tal:case>
      <tal:case case="default"
                i18n:translate="label_unlocked"
      >
        Unlocked
      </tal:case>
    </tal:switch>
  </a>
</tal:available>
